<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3x2 Physics Demo</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            overflow: hidden;
        }
        #canvas {
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
        // Native window movement detection
        var lastWindowX = window.screenX;
        var lastWindowY = window.screenY;

        function checkWindowMovement() {
            var currentX = window.screenX;
            var currentY = window.screenY;
            
            if (currentX !== lastWindowX || currentY !== lastWindowY) {
                var deltaX = currentX - lastWindowX;
                var deltaY = currentY - lastWindowY;
                
                // Dispatch custom event for the game to consume
                var event = new CustomEvent('windowMoved', {
                    detail: {
                        x: currentX,
                        y: currentY,
                        deltaX: deltaX,
                        deltaY: deltaY,
                        timestamp: Date.now()
                    }
                });
                document.dispatchEvent(event);
                
                lastWindowX = currentX;
                lastWindowY = currentY;
            }
        }

        // Check for window movement every 16ms (60fps)
        setInterval(checkWindowMovement, 16);

        // Listen for window movement events
        document.addEventListener('windowMoved', function(event) {
            // This event is available for the game to consume
            // The SDL code will handle window movement through its own event system
            console.log('Window movement detected:', event.detail);
        });

        // --- BROWSER EXTENSION INTEGRATION (OPTIONAL) ---
        // To use the browser extension instead of native detection:
        // 1. Copy browser-extension/ directory to your build-web/ folder
        // 2. Load the extension script here:
        /*
        var script = document.createElement('script');
        script.src = 'browser-extension/window-detector.js';
        document.head.appendChild(script);
        
        // The extension will automatically detect window movement and dispatch events
        document.addEventListener('windowMovement', function(event) {
            console.log('Extension detected movement:', event.detail);
        });
        */
    </script>
    {{{ SCRIPT }}}
</body>
</html>
